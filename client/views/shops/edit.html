<section class="content-header">
	<h1>
		Magasins
		<small>{{ title }}</small>
	</h1>
	<ol class="breadcrumb">
		<li><a href="#/"><i class="fa fa-dashboard"></i> Dashboard</a></li>
		<li><a href="#/shops/list">Magasins</a></li>
		<li class="active">{{ title }}</li>
	</ol>
</section>

<section class="content">
	<div class="row">
		<div class="col-lg-6">
			<div class="box box-primary">
				<div class="box-header">
					<h3 class="box-title">{{ title }} : <strong>{{ shop.name }}</strong></h3>
				</div><!-- /.box-header -->
				<!-- form start -->
				<form role="form" ng-submit="save()">
					<div class="box-body">
						<div class="form-group">
							<label>Nom</label>
							<input type="text" class="form-control"  ng-model="shop.name" value="{{ shop.name }}" required>
						</div>
						<div class="form-group">
							<label>Description</label>
							<textarea name="description" class="form-control" rows="10" ng-model="shop.description">{{ shop.description }}</textarea>
						</div>
						<div class="form-group">
							<label>Adresse</label>
							<input type="text" class="form-control"  ng-model="shop.address" value="{{ shop.address }}">
						</div>
						<div class="form-group">
							<label>Code postal</label>
							<input type="number" class="form-control"  ng-model="shop.zip" value="{{ shop.zip }}">
						</div>
						<div class="form-group">
							<label>Ville</label>
							<input type="text" class="form-control"  ng-model="shop.city" value="{{ shop.city }}">
						</div>
					</div><!-- /.box-body -->

					<div class="box-footer">
						<button type="submit" class="btn btn-success"><span class="fa fa-floppy-o"></span> Enregistrer</button>
					</div>
				</form>
			</div>
		</div>
		<div class="col-lg-6">
			<div class="box box-primary">
				<div class="box-header">
					<h3 class="box-title">Liste des produits en stock</strong></h3>
				</div><!-- /.box-header -->
				<div class="box-body table-responsive">
					<table id="products_table" class="table table-hover table-striped">
						<thead>
							<tr>
								<th></th>
								<th>#</th>
								<th>Nom</th>
								<th>Prix</th>
								<th>Quantité</th>
							</tr>
						</thead>
						<tbody ng-repeat="product in products">
							<tr>
								<td>
									<button ng-show="selectedProduct.id != product.id" class="btn btn-success btn-xs" ng-click="load(product, true)"><span class="fa fa-plus"></span></button>
									<button ng-show="selectedProduct.id == product.id" class="btn btn-danger btn-xs" ng-click="load(product, false)"><span class="fa fa-ellipsis-h"></span></button>
								</td>
								<td>{{ product.id }}</td>
								<td>{{ product.name }}</td>
								<td>{{ product.price }}</td>
								<td>{{ product.quantity }}</td>
							</tr>
							<tr ng-show="selectedProduct.id">
								<td colspan="5" style="padding:0">
									<table class="table">
										<tr ng-repeat="log in product.logs">
											<td ng-if="log.quantity > 0" class="success">Entrée</td>
											<td ng-if="log.quantity < 0" class="danger">Sortie</td>
											<td>{{ log.quantity }}</td>
											<td>{{ log.created_at }}</td>
										</tr>
									</table>
								</td>
							</tr>
						</tbody>
					</table>
				</div><!-- /.box-body -->
			</div>
		</div>
	</div>
</section><!-- /.content -->
